(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},26:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(15),r=a.n(s),c=a(33),l=a(16),i=a(18),u=a(5),h=a(6),d=a(9),m=a(7),f=a(8),b=a(34),k=a(32),v=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,this.props.shelves.filter(function(e){return!0===e.visibleShelf}).map(function(t){return o.a.createElement("div",{className:"bookshelf",key:t.id},o.a.createElement("h2",{className:"bookshelf-title"},t.label),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},e.props.books.filter(function(e){return e.shelf===t.id}).map(function(t){return o.a.createElement("li",{id:t.id,key:t.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},"undefined"!==typeof t.imageLinks&&"undefined"!==typeof t.imageLinks.thumbnail&&t.imageLinks.thumbnail.length>0?o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}):o.a.createElement("div",{className:"book-cover",style:{width:128,height:193}},"[book cover unavailable]"),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:t.shelf,onChange:function(a){return e.props.onShelfMove(t.id,a)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),e.props.shelves.map(function(e){return o.a.createElement("option",{value:e.id,key:e.id},e.label)})))),"undefined"!==typeof t.title&&t.title.length>0?o.a.createElement("div",{className:"book-title"},t.title):o.a.createElement("div",{className:"book-title"},"[book title unknown]"),"undefined"!==typeof t.authors&&t.authors.length>0?t.authors.map(function(e){return o.a.createElement("div",{className:"book-authors",key:t.id+","+e},e)}):o.a.createElement("div",{className:"book-authors"},"[author unknown]")))}))))}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(k.a,{className:"open-search",to:"/search"},"Add a book")))}}]),t}(n.Component),p=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(k.a,{className:"close-search",to:"/",onClick:function(){return e.props.onSearch("")}},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{id:"bookSearchBox",type:"text",placeholder:"Search by title or author",onChange:function(){return e.props.onSearch(document.getElementById("bookSearchBox").value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},this.props.searchResults.map(function(t){return o.a.createElement("li",{id:t.id,key:t.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},"undefined"!==typeof t.imageLinks&&"undefined"!==typeof t.imageLinks.thumbnail&&t.imageLinks.thumbnail.length>0?o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}):o.a.createElement("div",{className:"book-cover",style:{width:128,height:193}},"[book cover unavailable]"),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:t.shelf,onChange:function(a){return e.props.onShelfMove(t.id,a)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),e.props.shelves.map(function(e){return o.a.createElement("option",{value:e.id,key:e.id},e.label)})))),"undefined"!==typeof t.title&&t.title.length>0?o.a.createElement("div",{className:"book-title"},t.title):o.a.createElement("div",{className:"book-title"},"[book title unknown]"),"undefined"!==typeof t.authors&&t.authors.length>0?t.authors.map(function(e){return o.a.createElement("div",{className:"book-authors",key:t.id+","+e},e)}):o.a.createElement("div",{className:"book-authors"},"[author unknown]")))}))))}}]),t}(n.Component),E=a(13),y="https://reactnd-books-api.udacity.com",g=localStorage.token;g||(g=localStorage.token=Math.random().toString(36).substr(-8));var N={Accept:"application/json",Authorization:g},S=function(e){return fetch("".concat(y,"/books/").concat(e),{headers:N}).then(function(e){return e.json()}).then(function(e){return e.book})},j=function(){return fetch("".concat(y,"/books"),{headers:N}).then(function(e){return e.json()}).then(function(e){return e.books})},O=function(e,t){return fetch("".concat(y,"/books/").concat(e.id),{method:"PUT",headers:Object(E.a)({},N,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},w=function(e){return fetch("".concat(y,"/search"),{method:"POST",headers:Object(E.a)({},N,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},R=(a(26),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={books:[],shelves:[{id:"currentlyReading",label:"Currently Reading",visibleShelf:!0},{id:"wantToRead",label:"Want to Read",visibleShelf:!0},{id:"read",label:"Read",visibleShelf:!0},{id:"none",label:"None",visibleShelf:!1}],searchResults:[]},a.searchBooks=function(e){"undefined"!==typeof e&&e.length>0?w(e).then(function(e){"undefined"!==typeof e&&"empty query"!==e.error?(e.forEach(function(t,n){e[n].shelf=1===a.state.books.filter(function(e){return e.id===t.id}).length?a.state.books.filter(function(e){return e.id===t.id})[0].shelf:"none"}),a.setState({searchResults:e})):a.setState({searchResults:[]})}):a.setState({searchResults:[]})},a.updateShelves=function(e,t){var n=t.target.value,o=a.state.shelves.filter(function(e){return e.id===n})[0].label,s=Object(l.a)(Array,Object(i.a)(a.state.searchResults));S(e).then(function(e){return O(e,n)}).then(function(){return j()}).then(function(t){return s.forEach(function(t,r){t.id===e&&(t.shelf=n,a.setState({searchResults:s}),alert('You have added "'.concat(t.title,'" to "').concat(o,'."')))}),t}).then(function(e){a.setState({books:e})})},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;j().then(function(t){e.setState({books:t})})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(b.a,{exact:!0,path:"/search",render:function(){return o.a.createElement(p,{books:e.state.books,shelves:e.state.shelves,searchResults:e.state.searchResults,onSearch:function(t){e.searchBooks(t)},onShelfMove:function(t,a){e.updateShelves(t,a)}})}}),o.a.createElement(b.a,{exact:!0,path:"/",render:function(){return o.a.createElement(v,{books:e.state.books,shelves:e.state.shelves,onShelfMove:function(t,a){e.updateShelves(t,a)}})}}))}}]),t}(n.Component));a(29);r.a.render(o.a.createElement(c.a,null,o.a.createElement(R,null)),document.getElementById("root"))}},[[19,2,1]]]);
//# sourceMappingURL=main.66e5c63c.chunk.js.map